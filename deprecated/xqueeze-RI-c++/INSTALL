INSTALLING AND TESTING XQUEEZE-RI-C++

Contents
========

* Quick Instructions
  - INSTALLING
  _ TESTING

* Details
  - COMPILATION
  - INSTALLATION
  - TESTING
  - TESTING WITHOUT INSTALLATION
* Uninstalling
----------------------------------------------------------------------

Quick instructions
==================
- INSTALLING
You can install xqueeze-RI-c++ by running
    $ make
    $ su -c "make install"

- TESTING
You can test your installation by running
    $ cd test
    $ make
    $ make test
----------------------------------------------------------------------
	
Details
========
Installation has been tested only on Red Hat Linux 8.0 (i686) and
Debian GNU/Linux 3.0 (Alpha and Ultra Sparc). 

- COMPILATION

You'd require atleast the following for a succesful compilation:

* GNU g++ 
  (Tested with v-2.95 and v-3.2. It is recommended that you use
  v-3.2 since the C++ ABI has been frozen in this version)
* GNU Make
* GNU libstdc++ 3.x

You should be able to compile the source on other arch/OS combinations
too, provided you have a fairly recent Standard C++ Library and STL
implementation on your system.

You might have to modify the variables and rules in "Makefile" and
"common/Makefile" depending on your system

- INSTALLATION

Running make install copies the headers from "headers" to
/usr/include/xqml, creating that directory first if needed. The .so is
copied to /usr/lib and appropriate symlinks are created. Finally
/sbin/ldconfig is run to register the library.

To find out if the library has been installed properly, do this:
$ ld -lxqueeze

You may ignore the warning about start_symbol. In case of errors,
check that the output of these commands is similar:
$ ls -l libxqueeze* (run this in the source directory)
$ cd /usr/lib; ls -l libxqueeze*

You might possibly be missing some symlinks or the directory where the
library is installed may not be on the linker's search path
(LD_LIBRARY_PATH in case of ld - GNU Linker).

- TESTING

After running make install, cd to test and do:
$ make

This would create the files parser_test, writer_test and
xqagen_test. Next, run
$ make test

If all's well, then the last lines would be the following output (the
starred lines are not a part of it):

***** Test Output *****
./xqagen_test 2&> /dev/null
./writer_test 2&> /dev/null
./parser_test
Parsing with translation disabled... done
        See file "test.dat" for an xml-like output with numbers instead of identifiers
./parser_test -t
Parsing with translation enabled... done
        See file "test.xml" for an xml-like output (viewable in Mozilla/IE)
***** End Test Output ******

You'd also find four new files - test.xqa, test.xqm, test.dat and
test.xml in the directory. "test.xqa" contains the xqA specification,
"test.xqm" is the xqML document and the other two are generated by the
parser as reported above.

- TESTING WITHOUT INSTALLATION

If you want to run the test before installing the library, append the
flags "-I.. -L.." to the variable CFLAGS in test/Makefile. Then do:
$ export LD_LIBRARY_PATH=..:${LD_LIBRARY_PATH}

Now run "make" and "make test" as before.
----------------------------------------------------------------------

Uninstalling
==============

In case you want to uninstall the library, run:
$ su -c "make uninstall"

This will remove all Xqueeze headers from the include dir and also
remove the dir if it is empty. It will also remove the library from
from the lib dir. It is necessary that between installation and
uninstallation, none of the original headers in the source dir are
moved/removed and none of the installation variables in the top-level
Makefile are changed.
----------------------------------------------------------------------

Feedback is most welcome :-)
     - Tahir Hashmi
       <tnhashmi AT users.sourceforge.net>
